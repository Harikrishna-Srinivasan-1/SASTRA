{% extends "layout.html" %}

{% block title %}SASTRA Campus Database{% endblock %}

{% block head %}
	<style>
		@media (width >= 490px) {
			#schools {
				margin-left: 15px;
			}
			button[type='submit'] {
				margin-left: 130px;
			}
		}
	</style>
{% endblock %}

{% block content %}
	<form method="post">
		<label for="campus">Campus Name </label>
		<input type="text" name="campus" id="campus" style="margin-left: 10px;" maxlength="40" autofocus autocomplete="off" required>
		<br>
		<label for="schools">No. of schools </label>
		<input type="number" name="no_of_schools" id="schools" min="1" max="255" autocomplete="off" required>
		<br>
		<button type="submit" style="margin-top: 15px">Save</button>
	</form>
	<script>
		function style_btn() {
			if (window.innerWidth < 490) {
				document.querySelector("label[for='schools']").innerHTML = "No. of schools<br>";
			}
			else {
				document.querySelector("label[for='schools']").innerHTML = "No. of schools ";
			}
		}
		window.onload = style_btn
		window.onresize = style_btn
		const form = document.querySelector("form");
		const campus = document.querySelector("input[name='campus']");
		function escapeHtml(unsafe) {
			return unsafe.replace(/[&<"']/g, function (m) {
				switch (m) {
					case '&':
						return '&amp;';
					case '<':
						return '&lt;';
					case '>':
						return '&gt;';
					case '"':
						return '&quot;';
					case "'":
						return '&#039;';
				}
			});
		}
		form.onsubmit = () => {
			form.action = `/add/${escapeHtml(campus.value)}`;
		};
	</script>
{% endblock %}
